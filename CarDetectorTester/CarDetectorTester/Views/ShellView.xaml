<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:local="clr-namespace:CarDetectorTester" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions" xmlns:System="clr-namespace:System;assembly=mscorlib" xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Classic" x:Name="window" mc:Ignorable="d" x:Class="CarDetectorTester.Views.ShellView" Title="车检器控制台" xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts" xmlns:lc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol" Icon="/CarDetectorTester;component/Images/CarRepairBlue2-32.png" xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" d:DesignHeight="610" d:DesignWidth="773" SizeToContent="WidthAndHeight">
	<Window.Resources>
		<Storyboard x:Key="OnLoaded1">
			<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Height)" Storyboard.TargetName="window">
				<EasingDoubleKeyFrame KeyTime="0" Value="157" />
			</DoubleAnimationUsingKeyFrames>
		</Storyboard>
		<Style x:Key="ColumnHeaderGripperStyle" TargetType="{x:Type Thumb}">
			<Setter Property="Width" Value="8" />
			<Setter Property="Background" Value="Transparent" />
			<Setter Property="Cursor" Value="SizeWE" />
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="{x:Type Thumb}">
						<Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" />
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
		<Style x:Key="DataGridColumnHeaderStyle1" TargetType="{x:Type DataGridColumnHeader}">
			<Setter Property="VerticalContentAlignment" Value="Center" />
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
						<Grid>
							<Microsoft_Windows_Themes:DataGridHeaderBorder BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" IsClickable="{TemplateBinding CanUserSort}" IsPressed="{TemplateBinding IsPressed}" IsHovered="{TemplateBinding IsMouseOver}" Padding="{TemplateBinding Padding}" SortDirection="{TemplateBinding SortDirection}" SeparatorBrush="{TemplateBinding SeparatorBrush}" SeparatorVisibility="{TemplateBinding SeparatorVisibility}">
								<ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
							</Microsoft_Windows_Themes:DataGridHeaderBorder>
							<Thumb x:Name="PART_LeftHeaderGripper" HorizontalAlignment="Left" Style="{StaticResource ColumnHeaderGripperStyle}" />
							<Thumb x:Name="PART_RightHeaderGripper" HorizontalAlignment="Right" Style="{StaticResource ColumnHeaderGripperStyle}" />
						</Grid>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</Window.Resources>
    <Grid  d:DataContext="{d:DesignData /SampleData/ShellViewModelSampleData.xaml}" >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="144*" />
        </Grid.RowDefinitions>
        <lc:LayoutControl  x:Name="ChannelStat" Grid.Row="1" Orientation="Vertical" >
            <lc:LayoutGroup Orientation="Vertical" Header="通道" Name="layoutGroup5" View="GroupBox">
                <Grid Name="Channels">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width=".5*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="0.76*" />
                    </Grid.RowDefinitions>
                    <local:ChannelStatistics DataContext="{Binding Channel1Stat}" Grid.Column="0" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" />
                    <local:ChannelStatistics DataContext="{Binding Channel2Stat}" Grid.Column="1" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" />
                    <local:TitledLed Grid.Column="2" Height="119" HorizontalContentAlignment="Center" Speed="{Binding CarSpeedCh1}" VerticalContentAlignment="Bottom" />
                </Grid>
            </lc:LayoutGroup>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Name="stackPanel1" VerticalAlignment="Top" Width="200">
                <Button Width="auto" Height="auto" Name="ResetStatistics" Content="重置计数器" />
            </StackPanel>

        </lc:LayoutControl>
        <lc:LayoutControl  x:Name="Controls" >
            <lc:LayoutGroup Header="串口" Name="layoutGroup1" View="GroupBox">
                <lc:LayoutGroup Orientation="Vertical">
                    <lc:LayoutItem Label="串口号：" Name="layoutItem1">
                        <TextBox Name="ComPort" Opacity="0.815" Text="com1" TextChanged="ComPort_TextChanged" TextWrapping="Wrap" />
                    </lc:LayoutItem>
                    <lc:LayoutItem Label="波特率：" Name="layoutItem2">
                        <TextBox Name="BaundRate" Opacity="0.815" Text="9600" TextWrapping="Wrap" />
                    </lc:LayoutItem>
                </lc:LayoutGroup>
                <Button Content="打开" Height="49" HorizontalAlignment="Right" Name="Connect" Width="75" />
            </lc:LayoutGroup>
            <lc:LayoutGroup Header="命令" Name="layoutGroup2" View="GroupBox">
                <lc:LayoutGroup Orientation="Vertical">
                    <lc:LayoutItem Label="命令(Hex)" Name="layoutItem3">
                        <TextBox Name="CommandToSend" Opacity="0.815" Text="AA 55 03 00 02 00" TextWrapping="Wrap" />
                    </lc:LayoutItem>
                    <lc:LayoutItem Label="layoutItem4" Name="layoutItem4">
                        <TextBox Name="label1" Text="AA 55 07 01 02 ww ww dd dd sum" />
                    </lc:LayoutItem>
                </lc:LayoutGroup>
                <Button Content="发送" Height="49" HorizontalAlignment="Left" Name="SendCmd" VerticalAlignment="Bottom" Width="75" />
            </lc:LayoutGroup>
        </lc:LayoutControl>
        <lc:LayoutControl  Grid.Row="2"  x:Name="RealTimeData">
            <lc:LayoutGroup Orientation="Vertical" Header="实时数据" Name="layoutGroup3" View="GroupBox">
                <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Responses}" SelectionChanged="DataGrid_SelectionChanged">
                    <DataGrid.Columns>
                        <DataGridTextColumn Binding="{Binding ChannelId}" Header="Channel No" />
                        <DataGridTextColumn Binding="{Binding Data1}" Header="Data1" />
                        <DataGridTextColumn Binding="{Binding Data2}" Header="Data2" />
                        <DataGridTextColumn Binding="{Binding Data3}" Header="Frequency" />
                        <DataGridTextColumn Binding="{Binding Time}" Header="Time" />
                    </DataGrid.Columns>
                </DataGrid>
                <dxe:CheckEdit Content="实时刷新" Height="29"  />
            </lc:LayoutGroup>
        </lc:LayoutControl>
    </Grid>
</Window>
